<%- include('../Partials/header') %>
</head>

<body class="bg-gray-100 text-gray-900">

  <%- include('../Partials/nav') %>

  <!-- Header -->
  <section class="bg-white border-b">
    <div class="max-w-7xl mx-auto px-6 py-10 flex justify-between items-center">
      <div>
        <h1 class="text-4xl font-bold mb-1"> Your Homes</h1>
        <p class="text-gray-500">
          Manage homes you‚Äôve hosted
        </p>
      </div>

      <a
        href="/add-home"
        class="px-6 py-3 bg-rose-500 text-white rounded-xl font-semibold hover:bg-rose-600 transition"
      >
        + Add New Home
      </a>
    </div>
  </section>

  <!-- Host Homes -->
  <section class="max-w-7xl mx-auto px-6 py-16">

    <% if (registerHomes.length === 0) { %>
      <p class="text-center text-gray-500 text-lg">
        You haven‚Äôt added any homes yet.
      </p>
    <% } %>

    <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-10">
      <% registerHomes.forEach((home, index) => { %>

      <div class="bg-white rounded-3xl shadow hover:shadow-2xl transition overflow-hidden">

        <!-- Image -->
        <div class="relative h-56">
          <img
            src="<%= home.photoUrl && home.photoUrl.trim() !== '' 
              ? home.photoUrl 
              : 'https://images.unsplash.com/photo-1566073771259-6a8506099945' %>"
            onerror="this.onerror=null;this.src='https://images.unsplash.com/photo-1566073771259-6a8506099945';"
            alt="home image"
            class="w-full h-full object-cover"
          />

          <!-- Rating -->
          <span class="absolute top-4 left-4 bg-white/90 px-3 py-1 rounded-full text-sm font-semibold shadow">
            ‚≠ê <%= home.rating || '4.5' %>
          </span>
        </div>

        <!-- Content -->
        <div class="p-6">
          <h3 class="text-xl font-semibold mb-1">
            <%= home.houseName %>
          </h3>

          <p class="text-gray-500 mb-3">
            üìç <%= home.localion %>
          </p>

          <p class="text-lg font-bold mb-5">
            $<%= home.price %>
            <span class="text-sm text-gray-500 font-normal">/ night</span>
          </p>

          <!-- Host Actions -->
          <div class="flex gap-3">
            <a
              href="host/edit-home/<%= home.id %>/?editing=true"
              class="flex-1 text-center bg-blue-500 text-white py-2 rounded-xl font-semibold hover:bg-blue-600 transition"
            >
              Edit
            </a>

            <form action="/delete-home" method="POST" class="flex-1">
              <input type="hidden" name="homeIndex" value="<%= index %>">
              <button
                class="w-full border border-red-500 text-red-500 py-2 rounded-xl font-semibold hover:bg-red-500 hover:text-white transition"
              >
                Delete
              </button>
            </form>
          </div>
        </div>
      </div>

      <% }) %>
    </div>
  </section>

  <!-- Footer -->
  <footer class="bg-white border-t mt-20">
    <div class="max-w-7xl mx-auto px-6 py-6 text-center text-gray-500 text-sm">
      ¬© 2026 Airbnb Clone ‚Ä¢ Host Dashboard
    </div>
  </footer>

</body>
</html>
