<%- include('../Partials/header') %>
  </head>

  <body class="bg-gray-100 text-gray-900">

    <%- include('../Partials/nav') %>

      <!-- Page Header -->
      <section class="bg-white border-b">
        <div class="max-w-7xl mx-auto px-6 py-10">
          <h1 class="text-4xl font-bold mb-2">All Homes</h1>
          <p class="text-gray-500">
            Browse all available homes & stays
          </p>
        </div>
      </section>

      <!-- Home List -->
      <section class="max-w-7xl mx-auto px-6 py-20">
        <h2 class="text-3xl font-bold mb-12 text-center">
          Registered Homes
        </h2>

        <div class="grid grid-cols-1 sm:grid-cols-2 md:grid-cols-3 gap-10">
          <% registerHomes.forEach((home, index)=> { %>

            <div class="bg-white rounded-3xl shadow hover:shadow-2xl transition overflow-hidden">

              <!-- Image -->
              <div class="relative h-56">
                <img src="<%= home.imageUrl && home.imageUrl.trim() !== '' 
              ? home.imageUrl 
              : 'https://images.unsplash.com/photo-1566073771259-6a8506099945' %>"
                  onerror="this.onerror=null;this.src='https://images.unsplash.com/photo-1566073771259-6a8506099945';"
                  alt="hotel image" class="w-full h-full object-cover" />

                <!-- Rating -->
                <span class="absolute top-4 left-4 bg-white/90 px-3 py-1 rounded-full text-sm font-semibold shadow">
                  ‚≠ê <%= home.rating || '4.5' %>
                </span>

              </div>

              <!-- Content -->
              <div class="p-6">
                <h3 class="text-xl font-semibold mb-1">
                  <%= home.homeName %>
                </h3>

                <p class="text-gray-500 mb-4">
                  üìç <%= home.location %>
                </p>

                <p class="text-lg font-bold mb-6">
                  $<%= home.price %>
                    <span class="text-sm text-gray-500 font-normal">/ night</span>
                </p>

                <!-- Buttons -->
<div class="flex gap-3">
  <!-- Add to Favorites -->
  <form action="/favourites" method="post" class="flex-1">
    <input type="hidden" value="<%= home._id ?? '' %>" name="id" />

    <button
      type="submit"
      class="w-full inline-flex items-center justify-center gap-2
             rounded-xl border border-rose-300
             bg-rose-50 py-3 font-semibold text-rose-600
             shadow-sm
             hover:bg-rose-100 hover:shadow-md
             active:scale-95 transition-all duration-200
             focus:outline-none focus:ring-2 focus:ring-rose-400 focus:ring-offset-2">
       <span>Add to Favorites</span>
    </button>
  </form>

  <!-- View Details -->
  <a
    href="/homes/<%= home._id %>"
    class="flex-1 inline-flex items-center justify-center
           rounded-xl border border-gray-300
           bg-gray-50 py-3 font-semibold text-gray-700
           shadow-sm
           hover:bg-gray-100 hover:shadow-md
           active:scale-95 transition-all duration-200">
    View Details
  </a>
</div>

              </div>
            </div>

            <% }) %>
        </div>
      </section>

      <!-- Footer -->
      <footer class="bg-white border-t mt-20">
        <div class="max-w-7xl mx-auto px-6 py-6 text-center text-gray-500 text-sm">
          ¬© 2026 Airbnb Clone ‚Ä¢ Home Listing Page
        </div>
      </footer>

      <!-- JS -->
      <script>
        function toggleFav(btn) {
          if (btn.innerText === "ü§ç") {
            btn.innerText = "‚ù§Ô∏è";
            btn.classList.add("text-rose-500");
          } else {
            btn.innerText = "ü§ç";
            btn.classList.remove("text-rose-500");
          }
        }
      </script>

  </body>

  </html>